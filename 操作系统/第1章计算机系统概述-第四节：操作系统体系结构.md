 

- [指导获取：密码7281](https://url18.ctfile.com/f/22722418-803125355-edf378)
- [专栏目录首页：【专栏必读】王道考研408计算机网络+湖科大教书匠计算机网络+网络编程万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/121004242?spm=1001.2014.3001.5502)
- [王道考研408计算机组成原理万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/120664162?spm=1001.2014.3001.5502)
- [王道考研408数据结构+计算机算法设计与分析万字笔记](https://blog.csdn.net/qq_39183034/article/details/121501138?spm=1001.2014.3001.5501)
- [王道考研408计算机网络+湖科大教书匠计算机网络+网络编程万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/125668174)

### 文章目录

- [一：操作系统的内核](#_7)
- - [（1）时钟管理](#1_23)
  - [（2）中断机制](#2_31)
  - [（3）原语](#3_38)
  - [（4）系统控制的数据结构及处理](#4_50)
- [二：操作系统的体系结构](#_60)
- - [（1）大内核和微内核](#1_62)
  - - [A：思想](#A_64)
    - [B：优点](#B_79)
    - [C：缺点](#C_91)
  - [（2）分层结构](#2_109)
  - - [A：思想](#A_111)
    - [B：优缺点](#B_117)
  - [（3）模块化](#3_139)
  - - [A：思想](#A_142)
    - [B：优缺点](#B_162)
  - [（4）外核](#4_182)
  - - [A：思想](#A_184)
    - [B：优缺点](#B_196)

# 一：操作系统的内核

**内核基本概念：在软件工程思想和结构程序设计方法影响下诞生的现代操作系统，几乎都是层次式的结构，操作系统的各项功能分别被设置在不同的层次上。一些与硬件关联紧密的模块，比如时钟管理、中断处理、设备驱动等处于最底层。其次是运行频率较高的程序，如进程管理、存储器管理和设备管理等。这两部分内容构成了操作系统的内核**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa2198e713ac541c49a5aabdfc6b30895.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZHJvaWRzYW5zZmFsbGJhY2s%2Cshadow_50%2Ctext_Q1NETiBA5b-r5LmQ5rGf5rmW%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

**其功能主要有:**

- 时钟管理
- 中断处理
- 原语
- 对系统资源进行管理  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1c5ff9c789c340a08895bbf1b95a4110.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZHJvaWRzYW5zZmFsbGJhY2s%2Cshadow_50%2Ctext_Q1NETiBA5b-r5LmQ5rGf5rmW%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

## （1）时钟管理

**时钟管理：在计算机的各种部件中，时钟是最关键的设备。时钟的第一功能是计时，例如**

- 操作系统需要通过时钟管理，向用户提供**标准的系统时间**
- 通过时钟中断的管理，可以实现**进程的切换**

## （2）中断机制

- 这一部分可以结合《计算机组成原理》中的中断进行学习，读者可点击链接跳转[【专栏必读】王道考研408计算机组成原理万字笔记（有了它不需要你再做笔记了）：各章节内容概述导航和思维导图](https://blog.csdn.net/qq_39183034/article/details/120664162?spm=1001.2014.3001.5502)

- **中断机制中，只有一小部分属于内核，他们负责保护和恢复中断现场的信息，转移控制权到相关的处理程序。这样可以减少中断的处理时间，提高系统的并行处理能力**

## （3）原语

**原语：按层次结构设计的操作系统，底层必然是一些可被调用的公用小程序，他们各自完成一个规定的操作，通常把具有如下特点的程序称为原语\(Atomic Operation\)。定义原语的直接方法是关闭中断，使所有动作不可分割地完成后再打开中断**

- 处于操作系统的最底层，**最接近硬件**
- 这些程序的运行具有**原子性**，其操作只能 **“一气呵成”**（为了系统安全性和便于管理考虑）
- 这些程序的**运行时间都较短**，且**调用频繁**

## （4）系统控制的数据结构及处理

**系统控制的数据结构及处理：系统中用来登记状态信息的数据结构有很多，例如作业控制，进程控制块（PCB），设备控制块，各类链表，消息队列，缓冲区，空闲区登记表，内存分配表等等。为了实现有效管理，系统需要一些基本操作，常见的有以下几种**

- **进程管理：** 进程状态管理、进程调度和分派、创建与撤销进程控制块等
- **存储器管理：** 存储器的空间分配和回收、内存信息保护程序、代码对换程序等
- **设备管理** ：缓冲区管理，设备分配和回收

# 二：操作系统的体系结构

## （1）大内核和微内核

### A：思想

- **大内核 ：将操作系统的主要功能模块都作为系统内核，运行在核心态**

- **微内核 ：只把中断、原语、进程通信等最核心的功能放入内核。进程管理、文件管理和设备管理等功能以用户进程的形式运行在核心态**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F87b20cea372548f3ae393dcbea894fab.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

### B：优点

**大内核 ：优点如下**

- **性能高**、内核内部各种功能都**可以直接相互调用**

**微内核 ：优点如下**

- 内核**小**、功能**少**、易于**维护**、可靠性**高**
- 内核外的某个功能模块出错**不会导致整个系统崩溃**

### C：缺点

**大内核 ：缺点如下**

- 内核庞大、功能**复杂**、难以**维护**
- 某个功能模块出错，可能**导致整个系统崩溃**

**微内核 ：缺点如下**

- 性能**低**，需要频繁的**在用户态和核心态之间来回切换**
- 用户态下的各功能模块**不可以直接相互调用**，只能通过内核的\*\*“消息传递”\*\*来间接通信

## （2）分层结构

### A：思想

**分层结构：将操作系统分为若干层，最底层为硬件，最高层为用户接口。每一层只能调用紧邻它的低层的功能和服务**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F9f2787e82faa4f13a0d2d086c9aafacc.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

### B：优缺点

**优点如下**

- **便于系统的调试和验证**：如上图，硬件层可以先调试，因为它不需要考虑系统的其他部分；硬件层调试完且验证无误后，就可以调试第2层。由于每一层在调试时一定可以保证此层之下的所有层都是正确的，所以如果出现问题那么一定可以判定是这一层的
- **易于扩充和维护**：如果需要在操作系统中增加、修改或替换一层中的模块或整层时，只要不改变相应层间的接口，就不会影响到其他层

**缺点如下**

- 仅仅可以调用**相邻低层**
- 难以合理定义**各层的边界**
- **效率低，不允许跨层调用，系统调用执行时间长**

## （3）模块化

### A：思想

**模块化：将操作系统按功能划分为若干具有一定独立性的模块。每个模块具有某一方面的管理功能，并规定好各模块间的接口，使模块间可以通过接口进行通信。其中衡量模块独立性主要是以下两个标准**

- **内聚性**：模块内部各部分间联系的紧密程度。**内聚性越高，模块独立性越好**
- **耦合性**：模块间相互联系和相互影响的程度。**耦合度越低，模块独立性越好**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7aa823764fb344719803ab0c4a99500c.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

**操作系统模块化后，此时就有内核=主模块+可加载内核模块**

- **主模块**：只负责核心功能
- **可加载内核模块**：可以动态加载新模块到内核，而无需要重新编译整个内核

### B：优缺点

**优点如下**

- 模块间**逻辑清晰且易于维护**，确定模块间接口后，既可以实现**多模块同时开发**
- 支持**动态加载新的模块**，增强了操作系统的**适应性**
- 任何模块都**可以直接调用其他模块**，效率**高**

**缺点如下**

- 模块间接口定义**未必合理、实用**
- 模块间**相互依赖、难以调试和验证**

## （4）外核

### A：思想

**外核：内核负责进程调度、进程通信等功能；外核则负责为用户进程分为未经抽象的硬件资源，且保证资源实用安全（例如磁盘、内存）**

- **未经抽象的硬件资源**：对于一般的操作系统，用户所看到内存空间是经过操作系统映射的，并不是真实的（外存、文件等皆是如此）；而未经抽象的硬件资源就是外核会对机器直接进行分区，而不经过抽象

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbea5a4a806a747c6851c986f7d4378ab.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F126288600)

### B：优缺点

**优点如下**

- 外核可以直接给用户进程分配 **“不虚拟、不抽象”** 的硬件资源，使用户进程可以更加**灵活地使用硬件资源**
- 减少了虚拟硬件资源的 **“映射层”**，提升了效率

**缺点如下**

- 降低了系统的**一致性**
- 使系统变得**更复杂**