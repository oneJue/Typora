 

- [专栏目录首页：【专栏必读】王道考研408操作系统+Linux系统编程万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/121004242?spm=1001.2014.3001.5502)  

  ### 文章目录

  - [一：破坏互斥条件](#_9)
  - [二：破坏不可剥夺条件](#_19)
  - [三：破坏持有并等待条件](#_39)
  - [四：破坏循环等待条件](#_56)

  
  **预防死锁：破坏死锁产生的四个必要条件中的一个或几个**
- **互斥条件**
- **持有并等待条件**
- **不可剥夺条件**
- **循环等待条件（注意发生死锁一定有循环等待，但是发生循环等待未必死锁）**

# 一：破坏互斥条件

互斥条件是指只有对必须互斥使用的资源抢夺时才可能导致死锁。比如打印机设备就可能导致互斥，但是像内存、扬声器则不会

---

**破坏互斥条件：如果把只能互斥使用的资源改造为允许共享使用，则系统不会进入死锁状态。但并不是所有资源都可以改造为成共享使用的资源的，而且为了系统安全性，很多地方也是禁止改造的，所以互斥条件一般无法破坏**

# 二：破坏不可剥夺条件

不可剥夺条件是指进程所获得的资源在未使用完之前，不能由其他进程强行夺走，只能主动释放

---

**破坏不可剥夺条件：可以有以下两种方案**

- **方案一**：当某个进程请求新的资源得不到满足时，它**必须立即释放保持的所有资源，待以后需要时再重新申请。** 也就是说，**即使某些资源尚未使用完，也需要主动释放**
- **方案二**：当某个进程需要的资源被其他进程占有的时候，**可以由操作系统协助，将想要的资源强行剥夺。** 这种方式一般需要考虑各个进程的**优先级**

**缺点**

- 实现起来**比较复杂**
- 释放已获得的资源可能造成前一阶段工作的失效，所以这种方法**一般只适用于易保存和恢复状态的资源，比如CPU**
- 反复申请和释放资源**会增加系统开销，降低系统吞吐量**
- 若采用方法一，意味着只要暂时得不到某个资源，之前获得的那些资源都需要放弃，以后再重新申请，**容易导致进程饥饿**

# 三：破坏持有并等待条件

持有并等待条件：是指进程已经至少保持了一个资源，但又提出了新的资源请求，但是该资源又被其他进程占有，此时请求进程被阻塞，但是对自己持有的资源保持不放

---

**破坏持有并等待条件：可以采用静态分配方法。进程在运行前一次申请完它所需要的全部资源，在它的资源未得到满足前，不允许投入运行；一旦投入运行，这些资源就一直归它所有，该进程不会再请求别的任何资源**

**缺点**

- 有些资源可能只需要使用很短的时间，因此如果进程的整个运行期间都一直保持着所有资源，就会**造成严重的资源浪费，资源利用率极低**，并且该策略也有可能**导致饥饿现象**

# 四：破坏循环等待条件

循环剥夺条件：是指存在一种进程资源的循环等待链，链中的每一个进程已获得的资源同时被下一个进程所请求

---

**破坏循环等待条件：可以采用顺序资源分配方法。首先给系统中的资源进行编号，规定每个进程必须按照编号递增的顺序请求资源，编号相同的资源（也就是同类资源）一次申请完**

- 这是因为一个进程只有在已经占有小编号资源的同时，才有资格申请更大编号的资源。所以**已经持有大编号资源的进程不可能逆向申请小编号的资源**  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F38ff1cdca89e4494b034d651953cfe7f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZHJvaWRzYW5zZmFsbGJhY2s%2Cshadow_50%2Ctext_Q1NETiBA5oiR5pOm5LqGREo%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F121462546)

**缺点**

- **不方便增加新的设备**，因为**可能需要重新分配所有的编号**
- 进程实际使用资源的顺序可能和**编号递增顺序不一致**，造成**资源浪费**
- 必须**按规定次序申请资源**，为用户**编程带来了麻烦**