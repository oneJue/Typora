 

- [指导获取：密码7281](https://url18.ctfile.com/f/22722418-803125355-edf378)
- [专栏目录首页：【专栏必读】王道考研408计算机网络+湖科大教书匠计算机网络+网络编程万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/125668174)
- [王道考研408计算机组成原理万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/120664162?spm=1001.2014.3001.5502)
- [王道考研408数据结构+计算机算法设计与分析万字笔记](https://blog.csdn.net/qq_39183034/article/details/121501138?spm=1001.2014.3001.5501)
- [王道考研408操作系统+Linux系统编程万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/121004242?spm=1001.2014.3001.5502)

### 文章目录

- [一：层次域名空间](#_14)
- [二：域名服务器](#_36)
- [三：域名解析过程](#_61)

**DNS（域名解析系统）：相对于冗长、难以记忆的IP地址，人们更喜欢使用具有特定含义的字符串来标识主机（例如`www.baidu.com`），但最终通信时仍然需要IP地址，所以DNS可以实现将网址（域名）转换为其对应的IP地址**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F31c8ed98692e4e49a4bf0e31242954fb.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125642788)

# 一：层次域名空间

**层次域名：DNS中的域名都是用句点来分隔的，比如`www.baidu.com` ，这里的句点代表了不同层次之间的界限。在域名中，越靠右的位置表示其层级越高。域名的层级关系采用树状结构**

- 根：
- 顶级域名
- 二级域名
- 三级域名
- …

**其中顶级域名又分为三类**

- **国家顶级域名\(`nTLD`\)：** 国家和某些地区的域名，如“`.cn`”表示中国，“`.us`” 表示美国，“`.uk`”表示英国  
  **通用顶级域名\(`gTLD`\)**：常见的有“`.com`\(公司\)、“.`net`”\(网络服务机构\)、“`.org`”\(非营利性组织\)和“`.gov`”\(国家或政府部门\)等。  
  **基础结构域名**：这种顶级域名只有一个，即`arpa`， 用于反向域名解析，因此又称反向域名

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F11d9cca272e94e548d51a6d12044967e.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125642788)

# 二：域名服务器

域名解析系统是一个**联机分布式的数据库系统（采用C/S模型）**，域名到IP地址的解析是**由运行在域名服务器上的程**序完成的，一个服务器所负责管辖的\(或有权限的\)范围称为区\(不以“域”为单位\)，各单位根据具体情况来划分自己管辖范围的区，但在一个区中的所有结点必须是能够连通的。

每个区设置相应的**权限域名服务器**，用来**保存该区中的所有主机的域名到IP地址的映射**。每个域名服务器不但能够进行一些域名到IP地址的解析，而且还必须具有连向其他域名服务器的信息。**当自己不能进行域名到IP地址的转换时，能够知道到什么地方去找其他域名服务器**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff96866fd602640bb99cb5e973af01dae.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125642788)

**根域名服务器：根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。根域名服务器也是最重要的域名服务器，不管是哪个本地域名服务器，若要对因特网上任何一个域名进行解析，只要自己无法解析，就首先要求助于根域名服务器。因特网上有13个根域名服务器，尽管我们将这13个根域名服务器中的每个都视为单个服务器，但每个“服务器”实际上是冗余服务器的集群，以提供安全性和可靠性。需要注意的是，根域名服务器用来管辖顶级域\(如.com\)，通常它并不直接把待查询的域名直接转换成IP地址，而是告诉本地域名服务器下一步应当找哪个顶级域名服务器进行查询**

**顶级域名服务器：这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。收到DNS查询请求时，就给出相应的回答\(可能是最后的结果，也可能是下一步应当查找的域名服务器的IP地址\)**

**权限域名服务器：每台主机都必须在授权域名服务器处登记。为了更加可靠地工作，一台主机最好至少有两个授权域名服务器。实际上，许多域名服务器都同时充当本地域名服务器和授权域名服务器。授权域名服务器总能将其管辖的主机名转换为该主机的IP地址**

**本地域名服务器：本地域名服务器对域名系统非常重要。每个因特网服务提供者\(ISP\)， 或一所大学，甚至一所大学中的各个系，都可以拥有一个本地域名服务器。当一台主机发出DNS查询请求时，这个查询请求报文就发送给该主机的本地域名服务器。事实上，我们在Windows系统中配置“本地连接”时，就需要填写DNS地址，这个地址就是本地DNS\(域名服务器\)的地址**

# 三：域名解析过程

**域名解析：把域名映射成为IP地址或把IP地址映射成域名的过程。。当客户端需要域名解析时，通过本机的DNS客户端构造一个DNS请求报文，以UDP数据报方式发往本地域名服务器。域名解析有以下两种方式：**

- **递归查询**：
- **迭代查询**：

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe39a5a11ccec4c91a414c9ee26fe11db.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125642788)

**以迭代查询为例**：图片和描述来自[小林coding](https://blog.csdn.net/qq_34827674)

1.  客户端首先会发出一个**DNS请求**，问`www.server.com`的IP是啥，并发给**本地DNS服务器**\(也就是客户端的TCP/IP设置中填写的DNS服务器地址\)

2.  本地域名服务器收到客户端的请求后，**如果缓存里的表格能找到`www.server.com`则它直接返回IP地址**；如果没有，**本地DNS会去问它的根域名服务器**：“老大，能告诉我`www.server.com`的IP地址吗”？根域名服务器是最高层次的，它不直接用于域名解析,但能指明一条道路

3.  根DNS收到来自本地DNS的请求后，**发现后置是.com,说:“`www.server.com` 这个域名归`.com`区域管理”**，我给你`.com`顶级域名服务器地址给你，你去问问它吧”

4.  本地DNS收到顶级域名服务器的地址后，**发起请求问“老二，你能告诉我`www.server.com`的IP地址吗\?**”

5.  顶级域名服务器说:“我给你负责`www.server.com区域`的**权威DNS服务器的地址**，你去问它应该能问到”

6.  本地DNS于是转向问权威DNS服务器:“老三，`www.server.com`对 应的IP是啥呀\?”`server.com`的权威DNS服务器，**它是域名解析结果的原出处**为啥叫权威呢\?就是我的域名我做主

7.  权威DNS服务器查询后将**对应的IP地址**`X.X.X.X`告诉本地DNS

8.  本地DNS再将IP地址返回客户端，客户端和目标建立连接

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F721a5a6c8d1a46b5bc7106737506f9ca.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125642788)

为了提高DNS的查询效率，并减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了**高速缓存**。当一个DNS服务器接收到DNS查询结果时，它能将该DNS信息缓存在高速缓存中。这样，当另一个相同的域名查询到达该DNS服务器时，该服务器就能够直接提供所要求的IP地址，而不需要再去向其他DNS服务器询问。因为主机名和IP地址之间的映射不是永久的，所以DNS服务器将在一段时间后丢弃高速缓存中的信息