 

- [指导获取：密码7281](https://url18.ctfile.com/f/22722418-803125355-edf378)
- [专栏目录首页：【专栏必读】王道考研408计算机网络+湖科大教书匠计算机网络+网络编程万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/125668174)
- [王道考研408计算机组成原理万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/120664162?spm=1001.2014.3001.5502)
- [王道考研408数据结构+计算机算法设计与分析万字笔记](https://blog.csdn.net/qq_39183034/article/details/121501138?spm=1001.2014.3001.5501)
- [王道考研408操作系统+Linux系统编程万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/121004242?spm=1001.2014.3001.5502)

### 文章目录

- [一：TCP协议特点](#TCP_9)
- [二：TCP报文段](#TCP_49)
- - [（1）TCP报文段](#1TCP_50)
  - [（2）TCP首部](#2TCP_64)

# 一：TCP协议特点

**TCP：是一种是面向连接的、可靠的、基于字节流的传输层通信协议**

- **面向连接**：一定是**一对一**才能连接，而不像UDP协议可以一个主机同时向多个主机发送消息，也就是一对多是无法做到的
- **可靠的**：无论的网络链路中出现了怎样的链路变化，TCP都可以保证一个报文**一定能够到达接收端**
- **字节流**：消息是**没有边界**的，所以无论我们消息有多大都可以进行传输。并且消息是**有序**的，当前一个消息没有收到的时候，即使它先收到了后面的字节，那么也不能扔给应用层去处理，同时对**重复**的报文会自动丢弃

具体来说，其特点如下

**①：.TCP是面向连接\(虚连接\)的传输层协议  
**

**②：点对点**：每一条TCP连接**只能有两个端点**，每一条TCP连接只能是点对点的

**③：可靠有序、不丢不重**：TCP提供可靠交付的服务，**无差错、不丢失、不重复、按序到达**

**④：TCP提供全双工通信**：

- **发送缓存**：**准备发送的数据**和**已发送但尚未收到确认的数据**
- **接受缓存**：**按序到达但尚未被接受应用程序读取的数据**和**不按序到达的数据**

**④：TCP面向字节流**：TCP把应用程序交下来的数据看成仅仅是一连串的**无结构的字节流**

- **流**：流入到进程或从进程流出的字节序列

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc2c120641dea4905a7d906f65ab9fa17.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125542612)

# 二：TCP报文段

## （1）TCP报文段

**TCP报文段：一个TCP报文段分为TCP首部和TCP数据部分。整个TCP报文段作为IP数据报的数据部分被封装在IP数据报之中**

- CP首部的前20B是**固定**的
- TCP报文段的首部**最短为20B**，后面有4N字节是根据需要而增加的选项，通常长度为**4B的整数倍**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb2547455bc3640888afdc5ef76f229b8.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125542612)

---

## （2）TCP首部

**如下为TCP首部，各字段含义分别为**

- **源端口和目的端口（2B）**：端口是运输层与应用层的**服务接口**，运输层的复用和分用功能都要通过端口实现

- **序号字段（4B）**：在一个TCP连接中传送的字节流中的每一个字节都**按顺序编号**，本字段表示**本报文段所发送数据的第一个字节的序号**

- **确认号字段（4B）**：期望收到对方**下一个报文段的第一个数据字节的序号**。若确认号为 N N N，则证明**到序号 N N N\-1为止的所有数据都已正确收到**

- **数据偏移/首部长度（4位）**：是指**TCP报文段的数据起始处距离TCP报文段的起始处有多远**，以4B位单位，即1个数值是4B

- **保留字段（6位）**：保留为今后使用，但目前应置为0，该字段可以忽略不计

- **紧急位URG**：`URG=1`时， 标明此报文段中**有紧急数据**，是**高优先级**的数据，应尽快传送，不用在缓存里排队，配合**紧急指针**字段使用

- **确认位ACK**：只有当`ACK=1`时**确认号字段才有效**；当`ACK=0`时，确认号无效。TCP规定：**在连接建立后所有传送的报文段都必须把ACK置为1**

- **推送位PSH**：`PSH=1`时， **接收方尽快交付接收应用进程**，不再等到缓存填满再向上交付

- **复位RST**：`RST=1`时， 表明TCP连接中出现**严重差错，必须释放连接**，然后再重新建立传输链接

- **同步位SYN**：`SYN=1`时， 表明是一个**连接请求/连接接受**报文

- **终止位FIN**： FIN=1时， 表明此报文段**发送方数据已发完**，要求**释放连接**

- **窗口（2B）**：指的是发送本报文段的一方的**接收窗口**，即现在**允许对方发送的数据量**

- **校验和**：检验**首部+数据**，检验时要加上**12B伪首部**，第四个字段为6

- **紧急指针（16位）**：`URG=1`时才有意义，指出**本报文段中紧急数据的字节数**

- **选项**：最大报文段长度MSS、窗口扩大、时间戳、选择确认…

- **填充字段**：这是为了使整个首部长度是**4B的整数倍**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7c52f8586a8e4c98ad14737638253e7a.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125542612)