 

- [指导获取：密码7281](https://url18.ctfile.com/f/22722418-803125355-edf378)
- [专栏目录首页：【专栏必读】王道考研408计算机网络+湖科大教书匠计算机网络+网络编程万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/125668174)
- [王道考研408计算机组成原理万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/120664162?spm=1001.2014.3001.5502)
- [王道考研408数据结构+计算机算法设计与分析万字笔记](https://blog.csdn.net/qq_39183034/article/details/121501138?spm=1001.2014.3001.5501)
- [王道考研408操作系统+Linux系统编程万字笔记](https://zhangxing-tech.blog.csdn.net/article/details/121004242?spm=1001.2014.3001.5502)

### 文章目录

- [一：文件传输协议（FTP）](#FTP_10)
- - [（1）FTP及其工作原理](#1FTP_12)
  - - [A：FTP](#AFTP_14)
    - [B：工作原理](#B_25)
  - [（2）控制连接与数据连接](#2_40)
- [二：电子邮件](#_54)
- - [（1）电子邮件格式](#1_56)
  - [（2）电子邮件系统组成结构](#2_63)
  - [（3）电子邮件收发过程](#3_75)
  - [（4）简单邮件传输协议（SMTP）](#4SMTP_94)
  - - [A：SMTP概述](#ASMTP_96)
    - [B：多用途网际邮件扩充（MIME）](#BMIME_120)
  - [（5）邮局协议（POP3）](#5POP3_135)

# 一：文件传输协议（FTP）

## （1）FTP及其工作原理

### A：FTP

**文件传输协议（FTP）：这是是因特网上使用得最广泛的文件传输协议。FTP提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。它屏蔽了各计算机系统的细节，因而适合于在异构网络中的任意计算机之间传送文件，具有以下功能**

- 提供**不同种类主机系统**\(硬、软件体系等都可以不同\)之间的文件传输能力
- 以**用户权限管理的方式提供用户对远程FTP服务器**上的文件管理能力
- 以**匿名FTP的方式**提供公用文件共享的能力

### B：工作原理

**工作原理：FTP采用C/S的工作方式，它使用TCP可靠的传输服务。一个FTP服务器进程可同时为多个客户进程提供服务。FTP的服务器进程由两大部分组成：一个主进程，负责接收新的请求，另外有若干从属进程，负责处理单个请求。其工作步骤如下**

- 打开**熟知端口21 \(控制端口\)**，使客户进程能够连接上
- 等待客户进程发**连接请求**
- 启动从属进程来处理客户进程发来的请求。**主进程与从属进程并发执行**，从属进程对客户进程的请求处理完毕后即终止
- 回到**等待状态**，继续接收其他客户进程的请求

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F5f846377eaa34f2d95d4841a0e7423cc.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

## （2）控制连接与数据连接

FTP在工作时使用两个**并行的**TCP连接：一个是**控制连接\(端口号21\)**，一个是**数据连接\(端口号20\)**。使用两个不同的端口号可使协议更加简单和更容易实现  
![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F97ad26831c8541acabf204b54073f768.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

**控制连接**：服务器监听**21号端口**，等待**客户连接**，建立在这个端口上的连接称为控制连接，控制连接用来**传输控制信息\(如连接请求、传送请求等\)**，并且控制信息都以**7位ASCII格式传送**。FTP客户发出的传送请求,通过控制连接发送给服务器端的控制进程，但**控制连接并不用来传送文件**。在传输文件时还可以使用控制连接\(如客户在传输中途发一个中止传输的命令\)，因此控制连接在整个会话期间一直保持打开状态

**数据连接**：服务器端的控制进程在接收到FTP客户发来的**文件传输请求**后，就创建 **“数据传送进程”和“数据连接”**。数据连接用来 **连接客户端和服务器端的数据传送进程**，数据传送进程实际完成文件的传送，在传送完毕后**关闭“数据传送连接”** 并结束运行

# 二：电子邮件

## （1）电子邮件格式

**电子邮件格式：一封电子邮件由信封和内容两部分组成，其中内容又分为首部和主体。协议会规定首部的具体格式，主体部分则由用户撰写**

- **`To`（必填）**：填入一个或多个收件人的电子邮件地址。格式为`收件人邮箱名@邮箱所在主机域名`
- **`Subject`（可选）**：邮件主题，反映邮件核心内容  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe16c21be5eeb47f3a3032ff3bb0881e4.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

## （2）电子邮件系统组成结构

**组成结构：一个电子邮件系统有以下三大组件构成**

- **用户代理（User Agent）**：是**用户与电子邮件系统的接口**。用户代理使用户能够通过**一个很友好的接口发送和接收邮件**，用户代理至少应当具有**撰写、显示和邮件处理的功能**。通常情况下，用户代理就是**一个运行在PC上的程序**，常见的有Outlook、Foxmail 和Thunderbird等等

- **邮件服务器**：组成电子邮件系统的**核心**。邮件服务器的功能是**发送和接收邮件**，同时还要**向发信人报告邮件传送的情况\(己交付、被拒绝、丢大等\)**。邮件服务器采吊C/S方式工作，但它能够**同时充当客户和服务**器

- **邮件发送和读取所需协议**：邮件发送协议用于用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件，**通常使用的是SMTP**（Push）；邮件读取协议用于用户代理从邮件服务器读取邮件，**如POP3**（Pull）

## （3）电子邮件收发过程

**电子邮件收发过程：**

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F31b688b9c06a4153a846f87983daa464.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

- 发信人调用**用户代理**来撰写和编辑要发送的邮件。用户代理用**SMTP**把邮件传送给发送方邮件服务器
- 发送方邮件服务器将邮件放入**邮件缓存队列**中，等待发送
- 运行在发送方邮件服务器的SMTP客户进程，发现邮件缓存中有待发送的邮件，就向运行在接收方邮件服务器的**SMTP**服务器进程**发起建立TCP连接**
- TCP连接建立后, **SMTP**客户进程开始向远程**SMTP**服务器进程**发送邮件**。当所有待发送邮件发完后，**SMTP** 就**关闭所建立的TCP连接**
- 运行在接收方邮件服务器中的**SMTP**服务器进程收到邮件后，将邮件放入收信人的**用户邮箱**，等待收信人在方便时进行读取。
- 收信人打算收信时，调用用户代理，使用**POP3 \(或IMAP\)协议**将自己的邮件从接收方邮件服务器的用户邮箱中取回\(如果邮箱中有来信的话\)

## （4）简单邮件传输协议（SMTP）

### A：SMTP概述

**简单邮件传输协议（SMTP）：这是一种提供可靠且有效的电子邮件传输的协议，它控制两个相互通信的SMTP进程交换信息。由于SMTP使用C/S方式，因此负责发送邮件的SMTP进程就是SMTP客户，而负责接收邮件的SMTP进程就是SMTP服务器。SMTP用的是TCP连接，端口号为25。SMTP通信有以下三个阶段**

- **连接建立**：  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4bcd279ad8564a6ba7c446064e270687.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)
- **邮件发送**：  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd11879049fe447858bfef36b18c903f9.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)
- **连接释放**  
  ![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F70e9363323a24e45a961ce0628a63827.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

**SMTP协议存在以下缺陷**

- SMTP不能传送可执行文件或者其他二进制对象
- SMTP仅限于传送7位ASCII码， 不能传送其他非英语国家的文字
- SMTP服务器会拒绝超过一 定长度的邮件

### B：多用途网际邮件扩充（MIME）

**多用途网际邮件扩充（MIME）：主要用来解决如上提到的SMTP协议的诸多缺点。MIME并未改动SMTP或取代它。MIME的意图是继续使用目前的格式，但增加了邮件主体的结构，并定义了传送非ASCI码的编码规则。也就是说，MIME邮件可在现有的电子邮件程序和协议下传送。主要包含以下三部分内容**

- **5个新的邮件首部字段**：包括MIME版本、内容描述、内容标识、内容传送编码和内容类型
- **定义了许多邮件内容的格式**：对多媒体电子邮件的表示方法进行了标准化
- **定义了传送编码**：可对任何内容格式进行转换，而不会被邮件系统改变

![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4ba91950a644464cabeb2ca48c91df76.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F125662588)

## （5）邮局协议（POP3）

**邮局协议（POP3）：一个非常简单但功能有限的邮件读取协议。POP3采用的是“拉”\(Pull\) 的通信方式，当用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。POP也使用C/S的工作方式，在传输层使用TCP端口号为110。接收方的用户代理上必须运行POP客户程序，而接收方的邮件服务器上则运行POP服务器程序。有如下两种工作方式：**

- **下载并保留**：用户从邮件服务器上读取邮件后，**邮件依然会保存在邮件服务器上**，用户可再次从服务器上读取该邮件
- **下载并删除**：邮件一旦被读取， **就被从邮件服务器上删除**，用户不能再次从服务器上读取