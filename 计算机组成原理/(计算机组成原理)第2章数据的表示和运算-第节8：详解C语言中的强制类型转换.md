 

- [王道考研复习指导获取：密码7281](https://url18.ctfile.com/f/22722418-803125355-edf378?p=7281)
- [专栏目录首页：【专栏必读】王道考研408计算机组成原理万字笔记、题目题型总结、注意事项、目录导航和思维导图](https://zhangxing-tech.blog.csdn.net/article/details/120664162?spm=1001.2014.3001.5502)

### 文章目录

- - [（1）无符号数和有符号数](#1_11)
  - [（2）长整数变为短整数](#2_32)
  - [（3）短整数变为长整数](#3_70)

在学习完前面几节的内容后，相信大家对数据是如何在计算机中存储、运算的有了更加深入的认识，那么接下来我们就以更深层次的角度来看看我们熟悉的C语言中的强制类型转换

## （1）无符号数和有符号数

有如下代码

```c
int main()
{
            
            
	short x=-4321;//短整型，顶点负整数
	unsigned short y = (unsigned short)x;//无符号短整型
}
```

我们知道在计算机中数据是以补码的形式保存的，因此变量`x`的补码形式为

```c
1110 1111 0001 1111
```

第二句代码进行强制类型转换，把一个有符号转换为了无符号，并用无符号变量保存；**在这个过程中数据的内容是没有被改变的，只是改变了解释的方式**，也就说说变量y的内容依然是

```c
1110 1111 0001 1111
```

**但是在解释是计算机会把第一位的符号位当作数值位，因此y对应的真值是61215**

## （2）长整数变为短整数

有如下代码

```c
int a=165537,b=-34991;//整形
short c=(short)a;
short d=(short)b;//强制类型转换，长整形转为短整型
```

这个例子中短整型为16位，整形为32位，因此将长整形转换为短整型，短整型的变量肯定不能完全保存，会丢失精度。具体规则为：**高位截断，保留低位**

比如a的十六进制为

```c
0x000286a1
0010 1000 0110 1010 0001//二进制形式
```

使用c保存后，值为

```c
0x86a1
1000 0110 1010 0001//二进制形式
```

`1000 0110 1010 0001`是c的补码，属于有符号数，是一个负数，其原码（负数原码等于补码除符号位按位取反后+1）为`1111 1001 0101 1111`，对应真值-31071

再比如，b的十六进制为

```c
0xffff7751
1111 1111 1111 1111 0111 0111 0101 0001//二进制形式
```

使用d保存后，值为

```c
0x7751
0111 0111 0101 0001//二进制形式
```

`0111 0111 0101 0001`是d的补码，属于有符号数，是一个正数，其原码（正数原码和补码一致）为`0111 0111 0101 0001`，对应真值30545

## （3）短整数变为长整数

有如下代码

```c
short x=-4321;//短整型
int m=x;//使用整形保存短整型
unsigned short n=(unsigned short)x;//将x强制转为为无符号，然后复制给无符号短整型
unsigned int p = n;//把无符号短整型n变为无符号整形
```

这属于之前讲到过的符号扩展问题。**这里x是一个负数，所以会在符号位和原有的数值位之间添上1**，这样做最后的结果不改变，只是补码的长度发生改变  
![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1f454e739a8c43f58bfa20488f73aa4c.png&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F119383730)  
`unsigned short n=(unsigned short)x`将x这个有符号短整型转换为了无符号短整型，**计算机会将其补码原封不动的赋值给n，但是会按照无符号的规则解析真值**，真值为61215

`unsigned int p = n`属于无符号到无符号的转换，**直接填0即可**。  
![在这里插入图片描述](https://ziquyun.com/main/csdn/img?url=https%3A%2F%2Fimg-blog.csdnimg.cn%2F357a59836d6549f5a0b25a62f4585e34.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTgzMDM0%2Csize_16%2Ccolor_FFFFFF%2Ct_70&rfUrl=https%3A%2F%2Fzhangxing-tech.blog.csdn.net%2Farticle%2Fdetails%2F119383730)